+++
author = "Muso Verda"
title = "Оператор pairwise"
date = "2024-08-01"
tags = ["rxjs", "pairwise"]
categories = ["Development"]
meta = true
+++

Эмитит предыдущие и текущие значения в виде массива. То есть - значением каждого евента в потоке будет массив с двумя элементами.

На позиции `0` - будет значение предыдущего евента, на позиции `1` - значение текущего евента:

```typescript
[0,1], [1,2], [2,3], [3,4], [4,5]
```

Оператор `pairwise` лучше всего подходит, когда нужно _сравнить_ или выполнить _вычисления между текущими и предыдущими значениями_, выдаваемыми потоком.

Реальные примеры можно увидеть в таких сценариях, как отслеживание движения мыши, где предыдущая и текущая позиции используются для определения направления или скорости курсора; или в финансовых приложениях, где последовательные обновления цен акций сравниваются для расчета изменения или процентного изменения.

```typescript
interval(1000)
.pipe(
  pairwise(),
  take(5),
  filter(([a,b]) => a < b)
)
.subscribe(console.log);
```

Оператор `pairwise` не выдаст начальное значение, пока поток не выдаст по крайней мере два значения.

Такое поведение может привести к путанице, поскольку не будет вывода и ошибок, но поток может работать не так, как предполагалось, или ожидать больше значений.

## Ссылки

Marble Diagram - [Operator pairwise](https://rxjs.dev/api/operators/pairwise)